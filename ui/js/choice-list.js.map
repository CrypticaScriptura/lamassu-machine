{"version":3,"sources":["../src/choice-list.js"],"names":["ChoiceList","options","choiceListId","id","choiceList","$","selectedChoices","choices","currentPage","active","choiceType","prototype","init","cb","callback","self","document","querySelector","querySelectorAll","forEach","button","addEventListener","_buttonClickEventListener","e","target","hasClass","length","_setupPager","_setupChoices","_deselectChoices","_toggleChoice","innerText","replaceChoices","availableChoices","reset","_choices","push","splice","targetPage","find","hide","show","prop","text","page","choiceButtons","children","radio","i","removeClass","includes","addClass","html","append","choice","choiceIndex","indexOf","_toggleButton","toggleClass","disabled","deactivate"],"mappings":"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","file":"choice-list.js","sourcesContent":["/* globals $ */\n\nconst ChoiceList = function(options) {\n  this.choiceListId = options.id\n  this.choiceList = $(`#${options.id}`)\n  this.selectedChoices = []\n  this.choices = []\n  this.currentPage = 0\n  this.active = options.active || true\n  this.choiceType = 'single' // default\n}\n\nChoiceList.prototype.init = function init (cb) {\n  this.callback = cb\n\n  const self = this\n  document.querySelector(`#${this.choiceListId}`).querySelectorAll('.choice-list-button').forEach(button => {\n    button.addEventListener('mousedown', e => this._buttonClickEventListener(self, e))\n  })\n  return this\n}\n\nChoiceList.prototype._buttonClickEventListener = function _buttonClickEventListener(self, e) {\n    if (!self.active) return\n    const target = $(e.target)\n    if (target.hasClass('submit-choice-list-button')) {\n      // do not submit if at least one choice is not selected\n      if (self.selectedChoices.length === 0) return\n      return self.callback(self.selectedChoices)\n    }\n    if (target.hasClass('choice-list-arrow-up')) {\n      if (self.currentPage === 0) return \n      self.currentPage -= 1\n      self._setupPager(self.currentPage)\n      return self._setupChoices(self.currentPage)\n    }\n    if (target.hasClass('choice-list-arrow-down')) {\n      if (self.currentPage === this.choices.length - 1) return\n      self.currentPage += 1\n      self._setupPager(self.currentPage)\n      return self._setupChoices(self.currentPage)\n    }\n    if (target.hasClass('choice-list-item')) {\n      // if it's not a selectMultiple (choose multiple options) type of choice list,\n      // then deselect the previous choice before selecting the new one\n      if (self.choiceType !== 'selectMultiple') self._deselectChoices()\n      self._toggleChoice(target[0].innerText)\n    }\n\n}\n\nChoiceList.prototype.replaceChoices = function (availableChoices, choiceType = 'single') {\n  this.reset()\n  this.choiceType = choiceType\n  let _choices = [...availableChoices]\n  this.choices = []\n  while (_choices.length > 0) {\n    this.choices.push(_choices.splice(0,4))\n  }\n  this._setupPager(this.currentPage)\n  this._setupChoices(this.currentPage)\n}\n\nChoiceList.prototype._setupPager = function _setupPager (targetPage) {\n  if (this.choices.length == 1) this.choiceList.find('.choice-list-arrows-wrapper').hide()\n  else this.choiceList.find('.choice-list-arrows-wrapper').show()\n\n  if (targetPage === 0) this.choiceList.find('.choice-list-arrow-up').prop('disabled', true)\n  else this.choiceList.find('.choice-list-arrow-up').prop('disabled', false)\n\n  if (targetPage === this.choices.length - 1)\n    this.choiceList.find('.choice-list-arrow-down').prop('disabled', true)\n  else this.choiceList.find('.choice-list-arrow-down').prop('disabled', false)\n\n  this.choiceList.find('.choice-list-pager').text(`${targetPage + 1}/${this.choices.length}`)\n}\n\nChoiceList.prototype._setupChoices = function _setupChoices(page) {\n  const choices = this.choices[page]\n  const choiceButtons = this.choiceList.find('.choice-list-grid-wrapper')[0].children\n  const radio = '<div class=\"choice-list-radio\"><div></div></div>'\n  for (let i = 0; i < choiceButtons.length; i++) {\n    const button = $(choiceButtons[i])\n    button.removeClass('choice-selected')\n    if (choices[i]) {\n      if (this.selectedChoices.includes(choices[i])) button.addClass('choice-selected')\n      button.show()\n      button.html(radio).append($('<div></div>').text(choices[i]))\n      continue\n    }\n    button.hide()\n  }\n}\n \nChoiceList.prototype._toggleChoice = function _toggleChoice(choice) {\n  const choiceIndex = this.selectedChoices.indexOf(choice)\n  if (choiceIndex > -1) {\n    this.selectedChoices.splice(choiceIndex, 1)\n    this._toggleButton(choice)\n    return\n  }\n  this.selectedChoices.push(choice)\n  this._toggleButton(choice)\n}\n\nChoiceList.prototype._toggleButton = function _toggleButton(choice) {\n  const choiceButtons = this.choiceList.find('.choice-list-grid-wrapper')[0].children\n  for (let i = 0; i < choiceButtons.length; i++) {\n    const button = $(choiceButtons[i])\n    if (button[0].innerText === choice) {\n      button.toggleClass('choice-selected')\n      break\n    }\n  }\n  // check if should enable/disable submit button\n  (this.selectedChoices.length === 0) \n\n    ? this.choiceList.find('.submit-choice-list-button')[0].disabled = true\n \n    : this.choiceList.find('.submit-choice-list-button')[0].disabled = false\n  \n}\n\nChoiceList.prototype.deactivate = function deactivate() {\n  this.active = false\n  this.reset()\n}\n\nChoiceList.prototype._deselectChoices = function _deselectChoices() {\n  this.selectedChoices = []\n  const choiceButtons = this.choiceList.find('.choice-list-grid-wrapper')[0].children\n  for (let i = 0; i < choiceButtons.length; i++) {\n    const button = $(choiceButtons[i])\n    button.removeClass('choice-selected')\n  }\n}\n\nChoiceList.prototype.reset = function reset() {\n  this._deselectChoices()\n  this.choiceList.find('.submit-choice-list-button')[0].disabled = true\n  this.choices = []\n  this.currentPage = 0\n  this._setupPager(this.currentPage)\n}\n"]}