{"version":3,"sources":["../src/keyboard.js"],"names":["$","caretTo","el","index","createTextRange","range","move","select","selectionStart","focus","setSelectionRange","caretPos","document","setEndPoint","selection","createRange","e","text","length","fn","caret","offset","get","queue","next","isNaN","i","val","indexOf","caretToStart","caretToEnd","jQuery","KEYBOARD_TIMEOUT","emailRegex","Keyboard","options","keyboardId","id","keyboard","inputBox","keyCase","backspaceTimeout","active","timeoutRef","constraint","constraintButtons","prototype","init","callback","getElementById","self","addEventListener","_restartTimeout","target","hasClass","_toggleShift","_toggleSym","_backspace","_keyPress","_validateInput","find","_backspaceUp","clearTimeout","setTimeout","reset","data","activate","deactivate","hide","show","is","ascii_code","attr","addClass","window","removeClass","character","String","fromCharCode","content","result","substring","slice","setInputBox","newInputBox","setConstraint","constraintType","_validateSpaceSeparation","_validateNoConstraint","_validateEmail","includes","forEach","buttonId","trim","test"],"mappings":"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","file":"keyboard.js","sourcesContent":["/* globals $ */\n\n// Set caret position easily in jQuery\n// Written by and Copyright of Luke Morton, 2011\n// Licensed under MIT\n(function ($) {\n  // Behind the scenes method deals with browser\n  // idiosyncrasies and such\n  $.caretTo = function (el, index) {\n    if (el.createTextRange) {\n      var range = el.createTextRange()\n      range.move('character', index)\n      range.select()\n    } else if (el.selectionStart !== null) {\n      el.focus()\n      el.setSelectionRange(index, index)\n    }\n  }\n\n  // Another behind the scenes that collects the\n  // current caret position for an element\n\n  // TODO: Get working with Opera\n  $.caretPos = function (el) {\n    if ('selection' in document) {\n      var range = el.createTextRange()\n      try {\n        range.setEndPoint('EndToStart', document.selection.createRange())\n      } catch (e) {\n        // Catch IE failure here, return 0 like\n        // other browsers\n        return 0\n      }\n      return range.text.length\n    } else if (el.selectionStart !== null) {\n      return el.selectionStart\n    }\n  }\n\n  // The following methods are queued under fx for more\n  // flexibility when combining with $.fn.delay() and\n  // jQuery effects.\n\n  // Set caret to a particular index\n  $.fn.caret = function (index, offset) {\n    if (typeof (index) === 'undefined') {\n      return $.caretPos(this.get(0))\n    }\n\n    return this.queue(function (next) {\n      if (isNaN(index)) {\n        var i = $(this).val().indexOf(index)\n\n        if (offset === true) {\n          i += index.length\n        } else if (typeof (offset) !== 'undefined') {\n          i += offset\n        }\n\n        $.caretTo(this, i)\n      } else {\n        $.caretTo(this, index)\n      }\n\n      next()\n    })\n  }\n\n  // Set caret to beginning of an element\n  $.fn.caretToStart = function () {\n    return this.caret(0)\n  }\n\n  // Set caret to the end of an element\n  $.fn.caretToEnd = function () {\n    return this.queue(function (next) {\n      $.caretTo(this, $(this).val().length)\n      next()\n    })\n  }\n}(jQuery))\n\nconst KEYBOARD_TIMEOUT = 30000\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\nvar Keyboard = function (options) {\n  this.keyboardId = options.id\n  this.keyboard = $('#' + options.id)\n  this.inputBox = $(options.inputBox)\n  this.keyCase = options.keyCase || 'lc'\n  this.backspaceTimeout = options.backspaceTimeout || null\n  this.active = options.active || true\n  this.timeoutRef = options.timeoutRef || null\n  this.constraint = options.constraint || null\n  this.constraintButtons = []\n}\n\nKeyboard.prototype.init = function init (callback) {\n  this.callback = callback ? callback : null\n  var keyboard = document.getElementById(this.keyboardId)\n  var self = this\n  keyboard.addEventListener('mousedown', function (e) {\n    self._restartTimeout()\n    if (!self.active) return\n    var target = $(e.target)\n    if (target.hasClass('shift')) {\n      self._toggleShift()\n    } else if (target.hasClass('sym')) {\n      self._toggleSym()\n    } else if (target.hasClass('backspace')) {\n      self._backspace(target)\n    } else if (target.hasClass('key')) {\n      self._keyPress(target)\n    }\n    self._validateInput()\n  })\n\n  if (this.keyboardId === 'wifi-keyboard') {\n    this.keyboard.find('.entry .backspace').get(0).addEventListener('mouseup', function (e) {\n      var target = $(e.target)\n      self._backspaceUp(target)\n    })\n  }\n  return this\n}\n\nKeyboard.prototype._restartTimeout = function _restartTimeout () {\n  var self = this\n\n  clearTimeout(this.timeoutRef)\n  this.timeoutRef = setTimeout(function () {\n    self.reset()\n    self.callback && self.callback()\n  }, KEYBOARD_TIMEOUT)\n}\n\nKeyboard.prototype.reset = function reset () {\n  this.inputBox.data('content', '').val('')\n}\n\nKeyboard.prototype.activate = function activate () {\n  this.active = true\n  this.reset()\n  this._restartTimeout()\n}\n\nKeyboard.prototype.deactivate = function deactivate () {\n  this.active = false\n  clearTimeout(this.timeoutRef)\n}\n\nKeyboard.prototype._toggleShift = function _toggleShift () {\n  if (this.keyCase === 'lc') {\n    this.keyCase = 'uc'\n    this.keyboard.find('.keyboard-lc').hide()\n    this.keyboard.find('.keyboard-uc').show()\n  } else {\n    this.keyCase = 'lc'\n    this.keyboard.find('.keyboard-uc').hide()\n    this.keyboard.find('.keyboard-lc').show()\n  }\n}\n\nKeyboard.prototype._toggleSym = function _toggleSym () {\n  if (this.keyboard.find('.keyboard-sym').is(':visible')) {\n    this.keyboard.find('.keyboard-sym').hide()\n    if (this.keyCase === 'lc') {\n      this.keyboard.find('.keyboard-lc').show()\n    } else {\n      this.keyboard.find('.keyboard-uc').show()\n    }\n  } else {\n    this.keyboard.find('.keyboard-lc').hide()\n    this.keyboard.find('.keyboard-uc').hide()\n    this.keyboard.find('.keyboard-sym').show()\n  }\n}\n\nKeyboard.prototype._keyPress = function _keyPress (target) {\n  var ascii_code = target.attr('data-ascii')\n  if (ascii_code) {\n    target.addClass('active')\n    window.setTimeout(function () { target.removeClass('active') }, 500)\n    var inputBox = this.inputBox\n    var character = String.fromCharCode(ascii_code)\n    // var displayCharacter = (ascii_code === 32) ? \"␣\" : character\n    var content = inputBox.data('content') + character\n    inputBox.data('content', content)\n    inputBox.val(content)\n    inputBox.caretToEnd()\n  }\n}\n\nKeyboard.prototype._backspace = function _backspace (target) {\n  if (this.keyboardId !== 'wifi-keyboard') {\n    var inputBox = this.inputBox\n    var content = inputBox.data('content')\n    var result = content.substring(0, content.length - 1)\n    inputBox.data('content', result)\n    inputBox.val(result)\n    inputBox.caretToEnd()\n  } else {\n    target.addClass('active')\n    var inputBox = this.inputBox\n    window.clearTimeout(this.backspaceTimeout)\n    this.backspaceTimeout = window.setTimeout(function () {\n      inputBox.data('content', '')\n      inputBox.val('')\n      inputBox.caretToEnd()\n    }, 1000)\n  }\n}\n\nKeyboard.prototype._backspaceUp = function _backspaceUp (target) {\n  window.clearTimeout(this.backspaceTimeout)\n  if (!target) return\n  target.removeClass('active')\n\n  var inputBox = this.inputBox\n  var content = inputBox.data('content').slice(0, -1)\n  inputBox.data('content', content)\n\n  inputBox.val(content)\n  inputBox.caretToEnd()\n}\n\n// pass the class or id of the new input box to put text into, include the . or # as well\nKeyboard.prototype.setInputBox = function setInputBox(newInputBox, constraintButtons = []) {\n  this.inputBox = $(newInputBox)\n  if (!this.inputBox.data('content'))\n    this.inputBox.data('content', '').val('')\n  if (constraintButtons.length > 0) {\n    this.constraintButtons = constraintButtons\n  }\n  this._validateInput()\n}\n\nKeyboard.prototype.setConstraint = function setConstraint(constraintType, constraintButtons = []) {\n  this.constraint = constraintType\n  this.constraintButtons = constraintButtons\n  this._validateInput()\n}\n\nKeyboard.prototype._validateInput = function _validateInput() {\n  switch(this.constraint) {\n    case \"spaceSeparation\":\n      this._validateSpaceSeparation()\n      break\n    case \"none\":\n      this._validateNoConstraint()\n      break\n    case \"email\":\n      this._validateEmail()\n    default:\n      break\n  }\n}\n\nKeyboard.prototype._validateSpaceSeparation = function _validateSpaceSeparation() {\n  // no spaces allowed inside field\n  // minimum 1 character per field\n  if (!!this.inputBox.data('content') && !this.inputBox.data('content').includes(' ')) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n\nKeyboard.prototype._validateNoConstraint = function _validateSpaceSeparation() {\n  // minimum 1 non space character\n  if (!!this.inputBox.data('content') && !!this.inputBox.data('content').trim()) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n\nKeyboard.prototype._validateEmail = function _validateEmail() {\n  const content = this.inputBox.data('content') || ''\n  if (emailRegex.test(content)) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n"]}