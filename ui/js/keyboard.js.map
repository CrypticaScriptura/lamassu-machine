{"version":3,"sources":["../src/keyboard.js"],"names":["KEYBOARD_TIMEOUT","emailRegex","Keyboard","options","keyboardId","id","keyboard","$","inputBox","keyCase","backspaceTimeout","active","timeoutRef","constraint","constraintButtons","prototype","init","callback","document","getElementById","self","addEventListener","e","_restartTimeout","target","hasClass","_toggleShift","_toggleSym","_backspace","_keyPress","_validateInput","find","get","_backspaceUp","clearTimeout","setTimeout","reset","data","val","activate","deactivate","hide","show","is","ascii_code","attr","addClass","window","removeClass","character","String","fromCharCode","content","caretToEnd","result","substring","length","slice","caretTo","el","index","createTextRange","range","move","select","selectionStart","focus","setSelectionRange","caretPos","setEndPoint","selection","createRange","text","fn","caret","offset","queue","next","isNaN","i","indexOf","caretToStart","jQuery","setInputBox","newInputBox","setConstraint","constraintType","_validateSpaceSeparation","_validateNoConstraint","_validateEmail","includes","forEach","buttonId","trim","test"],"mappings":"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","file":"keyboard.js","sourcesContent":["/* globals $ */\n\nconst KEYBOARD_TIMEOUT = 30000\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\nvar Keyboard = function (options) {\n  this.keyboardId = options.id\n  this.keyboard = $('#' + options.id)\n  this.inputBox = $(options.inputBox)\n  this.keyCase = options.keyCase || 'lc'\n  this.backspaceTimeout = options.backspaceTimeout || null\n  this.active = options.active || true\n  this.timeoutRef = options.timeoutRef || null\n  this.constraint = options.constraint || null\n  this.constraintButtons = []\n}\n\nKeyboard.prototype.init = function init (callback) {\n  this.callback = callback ? callback : null\n  var keyboard = document.getElementById(this.keyboardId)\n  var self = this\n  keyboard.addEventListener('mousedown', function (e) {\n    self._restartTimeout()\n    if (!self.active) return\n    var target = $(e.target)\n    if (target.hasClass('shift')) {\n      self._toggleShift()\n    } else if (target.hasClass('sym')) {\n      self._toggleSym()\n    } else if (target.hasClass('backspace')) {\n      self._backspace(target)\n    } else if (target.hasClass('key')) {\n      self._keyPress(target)\n    }\n    self._validateInput()\n  })\n\n  if (this.keyboardId === 'wifi-keyboard') {\n    this.keyboard.find('.entry .backspace').get(0).addEventListener('mouseup', function (e) {\n      var target = $(e.target)\n      self._backspaceUp(target)\n    })\n  }\n  return this\n}\n\nKeyboard.prototype._restartTimeout = function _restartTimeout () {\n  var self = this\n\n  clearTimeout(this.timeoutRef)\n  this.timeoutRef = setTimeout(function () {\n    self.reset()\n    self.callback && self.callback()\n  }, KEYBOARD_TIMEOUT)\n}\n\nKeyboard.prototype.reset = function reset () {\n  this.inputBox.data('content', '').val('')\n}\n\nKeyboard.prototype.activate = function activate () {\n  this.active = true\n  this.reset()\n  this._restartTimeout()\n}\n\nKeyboard.prototype.deactivate = function deactivate () {\n  this.active = false\n  clearTimeout(this.timeoutRef)\n}\n\nKeyboard.prototype._toggleShift = function _toggleShift () {\n  if (this.keyCase === 'lc') {\n    this.keyCase = 'uc'\n    this.keyboard.find('.keyboard-lc').hide()\n    this.keyboard.find('.keyboard-uc').show()\n  } else {\n    this.keyCase = 'lc'\n    this.keyboard.find('.keyboard-uc').hide()\n    this.keyboard.find('.keyboard-lc').show()\n  }\n}\n\nKeyboard.prototype._toggleSym = function _toggleSym () {\n  if (this.keyboard.find('.keyboard-sym').is(':visible')) {\n    this.keyboard.find('.keyboard-sym').hide()\n    if (this.keyCase === 'lc') {\n      this.keyboard.find('.keyboard-lc').show()\n    } else {\n      this.keyboard.find('.keyboard-uc').show()\n    }\n  } else {\n    this.keyboard.find('.keyboard-lc').hide()\n    this.keyboard.find('.keyboard-uc').hide()\n    this.keyboard.find('.keyboard-sym').show()\n  }\n}\n\nKeyboard.prototype._keyPress = function _keyPress (target) {\n  var ascii_code = target.attr('data-ascii')\n  if (ascii_code) {\n    target.addClass('active')\n    window.setTimeout(function () { target.removeClass('active') }, 500)\n    var inputBox = this.inputBox\n    var character = String.fromCharCode(ascii_code)\n    // var displayCharacter = (ascii_code === 32) ? \"␣\" : character\n    var content = inputBox.data('content') + character\n    inputBox.data('content', content)\n    inputBox.val(content)\n    inputBox.caretToEnd()\n  }\n}\n\nKeyboard.prototype._backspace = function _backspace (target) {\n  if (this.keyboardId !== 'wifi-keyboard') {\n    var inputBox = this.inputBox\n    var content = inputBox.data('content')\n    var result = content.substring(0, content.length - 1)\n    inputBox.data('content', result)\n    inputBox.val(result)\n    inputBox.caretToEnd()\n\n  } else {\n    target.addClass('active')\n    var inputBox = this.inputBox\n    window.clearTimeout(this.backspaceTimeout)\n    this.backspaceTimeout = window.setTimeout(function () {\n      inputBox.data('content', '')\n      inputBox.val('')\n      inputBox.caretToEnd()\n    }, 1000)\n  }\n}\n\nKeyboard.prototype._backspaceUp = function _backspaceUp (target) {\n  window.clearTimeout(this.backspaceTimeout)\n  if (!target) return\n  target.removeClass('active')\n\n  var inputBox = this.inputBox\n  var content = inputBox.data('content').slice(0, -1)\n  inputBox.data('content', content)\n\n  inputBox.val(content)\n  inputBox.caretToEnd()\n}\n\n// Set caret position easily in jQuery\n// Written by and Copyright of Luke Morton, 2011\n// Licensed under MIT\n(function ($) {\n  // Behind the scenes method deals with browser\n  // idiosyncrasies and such\n  $.caretTo = function (el, index) {\n    if (el.createTextRange) {\n      var range = el.createTextRange()\n      range.move('character', index)\n      range.select()\n    } else if (el.selectionStart !== null) {\n      el.focus()\n      el.setSelectionRange(index, index)\n    }\n  }\n\n  // Another behind the scenes that collects the\n  // current caret position for an element\n\n  // TODO: Get working with Opera\n  $.caretPos = function (el) {\n    if ('selection' in document) {\n      var range = el.createTextRange()\n      try {\n        range.setEndPoint('EndToStart', document.selection.createRange())\n      } catch (e) {\n        // Catch IE failure here, return 0 like\n        // other browsers\n        return 0\n      }\n      return range.text.length\n    } else if (el.selectionStart !== null) {\n      return el.selectionStart\n    }\n  }\n\n  // The following methods are queued under fx for more\n  // flexibility when combining with $.fn.delay() and\n  // jQuery effects.\n\n  // Set caret to a particular index\n  $.fn.caret = function (index, offset) {\n    if (typeof (index) === 'undefined') {\n      return $.caretPos(this.get(0))\n    }\n\n    return this.queue(function (next) {\n      if (isNaN(index)) {\n        var i = $(this).val().indexOf(index)\n\n        if (offset === true) {\n          i += index.length\n        } else if (typeof (offset) !== 'undefined') {\n          i += offset\n        }\n\n        $.caretTo(this, i)\n      } else {\n        $.caretTo(this, index)\n      }\n\n      next()\n    })\n  }\n\n  // Set caret to beginning of an element\n  $.fn.caretToStart = function () {\n    return this.caret(0)\n  }\n\n  // Set caret to the end of an element\n  $.fn.caretToEnd = function () {\n    return this.queue(function (next) {\n      $.caretTo(this, $(this).val().length)\n      next()\n    })\n  }\n}(jQuery))\n\n// pass the class or id of the new input box to put text into, include the . or # as well\nKeyboard.prototype.setInputBox = function setInputBox(newInputBox, constraintButtons = []) {\n  this.inputBox = $(newInputBox)\n  if (!this.inputBox.data('content'))\n    this.inputBox.data('content', '').val('')\n  if (constraintButtons.length > 0) {\n    this.constraintButtons = constraintButtons\n  }\n  this._validateInput()\n}\n\nKeyboard.prototype.setConstraint = function setConstraint(constraintType, constraintButtons = []) {\n  this.constraint = constraintType\n  this.constraintButtons = constraintButtons\n  this._validateInput()\n}\n\nKeyboard.prototype._validateInput = function _validateInput() {\n  switch(this.constraint) {\n    case \"spaceSeparation\":\n      this._validateSpaceSeparation()\n      break\n    case \"none\":\n      this._validateNoConstraint()\n      break\n    case \"email\":\n      this._validateEmail()\n    default:\n      break\n  }\n}\n\nKeyboard.prototype._validateSpaceSeparation = function _validateSpaceSeparation() {\n  // no spaces allowed inside field\n  // minimum 1 character per field\n  if (!!this.inputBox.data('content') && !this.inputBox.data('content').includes(' ')) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n\nKeyboard.prototype._validateNoConstraint = function _validateSpaceSeparation() {\n  // minimum 1 non space character\n  if (!!this.inputBox.data('content') && !!this.inputBox.data('content').trim()) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n\nKeyboard.prototype._validateEmail = function _validateEmail() {\n  const content = this.inputBox.data('content') || ''\n  if (emailRegex.test(content)) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n"]}